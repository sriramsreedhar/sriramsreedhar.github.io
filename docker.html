<html>
<head>
<title>All about Docker  Containers</title>
</head>

<body> 
	<table border = "1">
<h1> Docker FAQ</h1>

Docker commands
<p>-----------------------</p>

<p>#docker info    <b>{show all info's regarding containers, images and volumes that are running}</b></p>

<p>#docker version     <b>{shows docker version} </b></p>
		
<p>#docker pull centos     <b>{Pulls latest centos image} </b></p>

<p>#docker images     <b>{shows pulled docker images}</b></p>
	
<p>#docker rmi -f 58a2fe7d2c20 <b>{Delete Images Forcefully}</b></p>

<p>#docker ps     <b>{shows current docker container that is running}</b></p>

<p>#docker ps -a     <b>{shows all previous run comtainers which has now exited}</b></p>

<p>#docker run --rm -ti centos:latest   <b>{Deletes container after exit} </b></p>
		 
<p>#docker run -it -p 8080:8080 -p 80:80 400c7388c1b2   <b>{Mapping Multiple ports from container to localhost} </b></p>
		
<p>#docker rmi $(docker images -a -q)  <b>{Removes all images} </b></p>
		
<p>#docker ps -a -f status=exited <b>{Lists all containers that has exit status(stopped)} </b></p>
		
<p>#docker rm $(docker ps -a -f status=exited -q) <b>{Remove all containers that has been stopped} </b></p>

		<p>#docker run -it centos:latest -e DATABASE_USER=DB <b>{Setting environment variables through  docker run command} </b></p>
		
		
 
<p>#docker run --name  hello_sriram centos:latest   <b>{Docker ps -a will allow you to identify this docker container by name}</b> </p>

<p>#docker run -d centos:latest sleep 100      <b>{Runs container in detached mode}</b></p>

<p>#docker inspect 8eb386c5dd7d <b> {docker inspect container_id will display details like IP address, hostname and all details of container }</b> </p>

<p>#docker run -it -p 8888:8080 tomcat:8.0 <b> {Maps from containers 8080 port to local desktop port 8888}</b> </p>

<p>#docker-machine create --driver amazonec2 --amazonec2-access-key AKI******* --amazonec2-secret-key 8T93C*******  aws-sandbox<b> { docker on Amazon Ec2}</b> </p>
		
<p>#docker logs 8eb386c5dd7d <b> { docker logs container_id will display the commands run in the container}</b> </p>

<p>#docker history centos:latest <b> {docker history image:tag list details of image layers, i.e creation date, applications added to it etc.}</b> </p>

<p>#docker run -it centos:latest  bash <b> {runs a container in bash, by default it runs in bash, so you can exclude bash syntax}</b> </p>

<p>#docker commit 8eb386c5dd7d centos/sriram:new  <b> {This will save container changes to docker Image in the repository:tag format}</b> </p>

<p>#docker build -t sriram/centos:1.0 .  <b> {This builds a new image from file Dockerfile, if you don't mention 1.0, it will write latest to tag }</b> </p>
<p>Dockerfile syntax - FROM, RUN, CMD, WORKDIR, USER, COPY <b> {Dockerfile has the following basic commands to start with}</b> </p>

<p>#docker stats  <b> Shows CPU and Mem usage of all or a particular container, if you pass container_id </b> </p>

<p>To Push Docker Images To Docker HUB <b> Create a Tag, Login to Docker hub, Push Image  </b> </p>
<p>#docker tag 3a685deeb240 sriramsreedhar/centos7.6:1.0 <b>To tag a image, #docker tag image_id(3a685deeb240) docker_hub_repo_name(sriramsreedhar/centos7.6):new_tag_name(1.0) </b> </p>
<p>#docker login --username=sriramsreedhar<b> Login to docker hub to push the Image</b></p> 
<p>#docker push sriramsreedhar/centos7.6:1.0<b> #docker push docker_hub_repo_name:new_tag_created_above</b> </p>

<p>#docker system prune<b> This will remove: all stopped containers, all networks not used, all dangling images, all dangling build caches</b> </p>


<p>#docker container rm cc3f2ff51cab cd20b396a061 <b> To remove multiple containers</b> </p>
<p>#docker container prune --filter "until=12h"<b>To remove all images that are created more than 12 hours ago, run: </b> </p>
<p>#docker container stop $(docker container ls -aq) <b> To stop all running containers use the docker container stop command followed by a list of all containers IDs.</b> </p>
<p>#docker container rm $(docker container ls -aq) <b>To remove all docker containers </b> </p>
<p>#docker volume ls<b> To list docker volume</b> </p>
<p>#docker network ls<b> To list docker network</b> </p>
<p>#docker network prune<b>To remove all unused networks </b> </p>
<p>#docker volume rm volume_name1 vol_name2 <b>To remove volumes from docker </b> </p>
<p>#docker image rm 1e1148e4cc2c 1e1148e4cc2b 1e1148e4cc2e  <b>Remove multiple docker Images </b> </p>

<p>docker rmi <repo:tag> <b> When you get image has dependent child images use this command</b> </p>
<p>docker rename goofy_keller python_app <b> Rename docker container </b> </p>
<p> <b>  Create a Docker container links  - Run a container, Link a container to image, login to both containers and ping each other</b> </p>
<p> #docker run -d --name redis  redis:latest (this for latest)<b>Run a  Redis container </b> </p>
<p> #docker run -d   --link container_name image_repo:tag <b> Link the above container to an image and start a container</b> </p>
<p> #docker exec -it  6b9580415a7a  bash <b> Login to containers with this command </b> </p>
<p> <b>Some commands on how to use docker-compose that manages the containers through docker-compose.yml/yaml config file.</b> </p>
<p> #docker-compose up -d<b> picks up the config from docker-compose.yaml or docker-compose.yml and starts the container in background.</b> </p>
<p> #docker-compose build <b> Builds containers from docker-compose.yaml or .yml file</b> </p>
<p> #docker-compose ps <b> displays running containers from docker-compose.yml/yaml config file.</b> </p>
<p> #docker-compose logs  <b> shows aggrgate logs for compose managed containers. </b> </p>
<p> #docker-compose logs  -f <b> Appends logs  of yaml managed containers, when the log grows </b> </p>
<p> #docker-compose stop <b> Stops all yaml managed containers </b> </p>
<p> #docker-compose rm<b> Removes all yaml managed containers </b> </p>
<p>  <b>Docker Networking examples </b> </p>
<p> #docker network rm sriram-network <b> Remove Network</b> </p>
<p> #docker network create --driver bridge srirams_network <b> Create a cutom bridge network</b> </p>		
<p> #docker network connect srirams_network 85eb4a5ad8fb <b> Connecting to Bridge network</b> </p>
<p> #docker run -d --net  none busybox sleep 1000<b> Start docker container in non-networking mode(--net none).</b> </p>
<p> #docker network ls <b> List the networking interfaces for docker</b> </p>
<p> #docker network inspect my_bridge_network<b>To know the details of a network </b> </p>
<p> #docker network create --driver bridge srirams_network<b> Create a new Bridge network, each bridge network is isolated from each other</b> </p>
<p> #docker run -d --name container_2 --net srirams_network busybox sleep 1000<b> Use the new brige network created above</b> </p>
<p> #docker network connect sriram2_network container_3 <b> Connect to a additional bridge network, apart from the regular network</b> </p>
<p> #docker network disconnect sriram2_network container_3 <b>To disconnect from a bridge network </b> </p>
<p> #docker run -d --name container_4 --net host busybox sleep 1000 <b>Host only network is least secure and access to all networks of containers.</b> </p>
<p> <b> Types of Docker Network </b> </p>
<p> Bridge Network<b> This has access to out side world and containers in the bridge have access to each other</b> </p>
<p> None network<b> This has only loop back address to it and is not accessible to outside world </b> </p>
<p> Host Network<b> This network has access to all network accessed by host</b> </p>
<p> Overlay Network <b> Used by Swarm service this network can be accessed by different docker hosts</b> </p>
<p> <b>Docker Swarm</b> </p>
<p> <b>Prerequisite - needs Virtualbox driver that is part of virtualbox installation to create managers and hosts from docker-machine </b> </p>
<p> <b> Push local Images to Docker Hub </b> </p>
<p> $docker login <b> Authenticate to docker Hub to we can push upstream </b> </p>
<p> $docker tag 20962dcacaa6 sriramsreedhar/centos7:feb212020 <b> Tags image id with user/repos:tag </b> </p>
<p> $docker push sriramsreedhar/centos7:feb212020 <b> Push Image to Docker Hub </b> </p>
<p> $ docker run -ti -d --privileged --name=centos7 -p 2222:22 -p 8080:8080 -p 80:80 -p 3306:3306 -p 6379:6379  -v /sys/fs/cgroup:/sys/fs/cgroup:ro -v /Users/sriram:/opt centos:latest
<p><b> Run docker container in background with systemctl priviledge and forwarding ports to localhost </b></p>
<p> $ docker container exec -it centos7 /bin/bash <b> Login to the running container </b> </p>	
		

 </table>

</body>
</html>
